import{e as f,r as u,j as e,J as w,K as v,g as k,L as h}from"./index-C2xFYc7i.js";import{h as C}from"./moment-C5S46NFB.js";import{M as d}from"./react-tooltip.min-BKMyztyo.js";import{u as P}from"./clickOutside-0deXeaE-.js";import{c as N}from"./confirmBox-d44N0WSQ.js";import{T as S,a as R,b as y,c as t,d as D,e as a,P as T}from"./index-Cn40Z5-E.js";import{I as A}from"./img1-Dr1yV29J.js";import{w as j}from"./test.constants-D4XVrKvG.js";const Y=({children:n,setShowPopup:l,width:c,redux:r,clickoutSide:p=!0})=>{const x=f(),i=u.useRef();P(i,()=>{p&&o()});function o(){r?x(l(!1)):l(!1)}return e.jsx("div",{className:"fixed top-0 left-0 w-full bg-black bg-opacity-50 flex items-center justify-center px-3 h-screen z-[9999]",children:e.jsxs("div",{className:`popup bg-secondary ${c||"lg:w-[50%] md:w-[65%] sm:w-[80%] w-full"} rounded-lg sm:px-8 px-4 pb-8 py-4 relative`,ref:i,children:[e.jsx("div",{className:"absolute top-2 right-3 text-2xl cursor-pointer font-semibold w-fit ",onClick:o,children:e.jsx("i",{className:"uil uil-times"})}),e.jsx("div",{children:n})]})})},z=()=>{const n=f(),l=()=>{n(w({showPopup:!1}))},[c,r]=u.useState("");return N({message:"Are your sure. You want to reject this withdraw?",onYesClick:""}),e.jsx(Y,{setShowPopup:w,clickoutSide:!1,redux:!0,children:e.jsxs("div",{children:[e.jsx("center",{children:e.jsx("h3",{className:"heading-lg",children:"Add Reject Reason"})}),e.jsxs("div",{className:"form-row mt-8",children:[e.jsx("label",{children:"Reason"}),e.jsx("input",{type:"text",value:c,placeholder:"Please enter reason",onChange:i=>r(i.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 mt-6",children:[e.jsx("button",{className:"btn-primary py-2 px-6",children:"'Proceed'"}),e.jsx("button",{className:"btn-secondary py-2 px-4",onClick:l,children:"Cancel"})]})]})})},H=()=>{var g;const n=f(),[l,c]=u.useState(""),r=v(),{showPopup:p}=k(s=>s.withdraw);u.useEffect(()=>{const s=r.pathname.split("/").pop();["pending","approved","declined"].includes(s)?c(s):c("")},[r]);const x=l?(g=j)==null?void 0:g.filter(s=>(s==null?void 0:s.status)===l):j,i=s=>{N({message:"Are you sure you want to accept this withdrawal?",onYesClick:()=>{console.log(`Withdrawal with ID ${s} is approved.`)}})},o=s=>{n(w({showPopup:!0,withdrawId:s}))},b=s=>{switch(s){case"pending":return"text-yellow-500";case"approved":return"text-green-500";case"declined":return"text-red-500";default:return"text-gray-500"}};return e.jsxs(e.Fragment,{children:[p&&e.jsx(z,{}),e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(S,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(R,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(y,{children:[e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"User"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Transfer Amount"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Platform Fee"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Withdraw Wallet"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Date"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Status"}),e.jsx(t,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Actions"})]})}),e.jsx(D,{children:x.map((s,m)=>e.jsxs(y,{className:`text-grayText sm:hover:bg-stroke hover:text-pure ${m===j.length-1?"":"border-b border-b-gray-700"}`,children:[e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:m+1}),e.jsx(a,{className:"py-4 px-6",children:e.jsxs("span",{className:"inline-flex items-center justify-start gap-3 w-full h-full ",children:[e.jsx("img",{src:A,alt:s.userName,className:"w-8 h-8 rounded-full"}),e.jsx(h,{to:`/app/users/details/${s.user._id}`,className:"underline capitalize",children:s.user.username})]})}),e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.withdrawAmount-s.withdrawFee}),e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.withdrawFee}),e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{children:s.withdrawBank.bankName})})}),e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:C(s.createdAt).format("DD MMM YYYY hh:mm A")}),e.jsx(a,{className:`px-6 py-4 whitespace-nowrap sm:text-center ' capitalize ${b(s.status)}`,children:s.status}),e.jsx(a,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("div",{className:"flex items-center gap-4 text-xl",children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs(h,{to:"/app/withdrawals/details/1",className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",children:[e.jsx("i",{className:"uil uil-eye"}),e.jsx(d,{id:"view-user-details",style:{fontSize:15}})]}),e.jsxs("button",{className:"text-green-500","data-tooltip-id":"approve-deposit","data-tooltip-content":"Approve Request",onClick:()=>i(s._id),children:[e.jsx("i",{className:"uil uil-check"}),e.jsx(d,{id:"approve-deposit",style:{fontSize:15}})]}),e.jsxs("button",{className:"text-red-500","data-tooltip-id":"declined-deposit","data-tooltip-content":"Declined Request",onClick:()=>o(s._id),children:[e.jsx("i",{className:"uil uil-times"}),e.jsx(d,{id:"declined-deposit",style:{fontSize:15}})]})]}):s.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsxs(h,{to:"/app/withdrawals/details/1",className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",children:[e.jsx("i",{className:"uil uil-eye"}),e.jsx(d,{id:"view-user-details",style:{fontSize:15}})]}),e.jsxs("button",{className:"text-red-500","data-tooltip-id":"declined-deposit","data-tooltip-content":"Declined Request",onClick:()=>o(s._id),children:[e.jsx("i",{className:"uil uil-times"}),e.jsx(d,{id:"declined-deposit",style:{fontSize:15}})]})]}):s.status==="declined"?e.jsx("span",{children:"--------"}):null})})]},s._id))})]}),e.jsx("div",{className:"py-4 text-center",children:e.jsx(T,{totalPages:3,currentPage:1,setCurrentPage:()=>{}})})]})})]})};export{H as W};

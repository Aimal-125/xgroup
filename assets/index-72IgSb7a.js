import{e as C,r,g as w,h as U,j as e,A as B,k as P,x as S,y as A,t as E}from"./index-DSEsrcg-.js";import{M as c}from"./react-tooltip.min-D7Xg-x51.js";import{H as D}from"./Heading-BI3kDaw8.js";import{B as L}from"./BackBtn-BA5ve5ZU.js";import{L as H}from"./LoadingBtn-D4Ooyov9.js";import"./index-LvzHWtTh.js";import"./ClipLoader-BNNw6Au1.js";const q=()=>{var p,x,u,f,h,j;const b=C(),t=r.useRef(null),{user:a}=w(s=>s.auth),[n,y]=r.useState(a!=null&&a.image?U+(a==null?void 0:a.image):""),[d,m]=r.useState(null),[N,o]=r.useState(!1),v=s=>{const l=s.target.files[0];m(l);const i=new FileReader;i.readAsDataURL(l),i.onloadend=()=>{y(i.result)}},k=async()=>{o(!0);const s=new FormData;s.append("image",d);try{const{data:{data:{message:l,doc:i}}}=await B.put("/user/update-profile",s,{headers:{"Content-Type":"multipart/form-data"}});P.success(l);const g={...i,token:a==null?void 0:a.token};b(S(g)),A(g),m(null),o(!1)}catch(l){o(!1),E(l)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{title:"Profile"}),e.jsx(L,{})]}),e.jsx("div",{className:"bg-dark p-4 rounded-lg mt-6",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsxs("div",{className:"relative w-[140px] h-[140px] rounded-full border-2 border-primary flex items-center justify-center bg-primary text-2xl font-semibold group",children:[e.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:t,onChange:v}),n?e.jsx("img",{src:n,alt:"",className:"w-full h-full rounded-full object-cover"}):e.jsxs("span",{children:[(u=(x=(p=a==null?void 0:a.username)==null?void 0:p.split(" ")[0])==null?void 0:x.charAt(0))==null?void 0:u.toUpperCase(),((j=(h=(f=a==null?void 0:a.username)==null?void 0:f.split(" ")[1])==null?void 0:h.charAt(0))==null?void 0:j.toUpperCase())||""]}),e.jsx("div",{className:"w-full h-full absolute top-0 left-0 bg-black bg-opacity-80 rounded-full hidden group-hover:flex items-center justify-center text-sm cursor-pointer",onClick:()=>{var s;return(s=t==null?void 0:t.current)==null?void 0:s.click()},children:n?"Change Profile":"Upload Profile"}),e.jsx("div",{className:"absolute bottom-0 right-4 text-2xl text-gray-200 cursor-pointer",onClick:()=>{var s;return(s=t==null?void 0:t.current)==null?void 0:s.click()},children:e.jsx("i",{className:"uil uil-camera-plus"})})]})}),e.jsxs("div",{className:"mt-10 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Username"}),e.jsxs("span",{"data-tooltip-id":"edit-username","data-tooltip-content":"Username Cannot Be Changed",children:[e.jsx("i",{className:"uil uil-info-circle"}),e.jsx(c,{id:"edit-username",style:{fontSize:15,background:"var(--primary)"}})]})]}),e.jsx("input",{type:"text",value:a==null?void 0:a.username,readOnly:!0,disabled:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Email"}),e.jsxs("span",{"data-tooltip-id":"edit-email","data-tooltip-content":"Email Cannot Be Changed",children:[e.jsx("i",{className:"uil uil-info-circle"}),e.jsx(c,{id:"edit-email",style:{fontSize:15,background:"var(--primary)"}})]})]}),e.jsx("input",{type:"text",value:a==null?void 0:a.email,readOnly:!0,disabled:!0})]})]}),e.jsx("div",{className:"flex md:flex-row flex-col gap-4",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Phone Number"}),e.jsxs("span",{"data-tooltip-id":"edit-phone","data-tooltip-content":"Phone Number Cannot Be Changed",children:[e.jsx("i",{className:"uil uil-info-circle"}),e.jsx(c,{id:"edit-phone",style:{fontSize:15,background:"var(--primary)"}})]})]}),e.jsx("input",{type:"text",value:a==null?void 0:a.phone,readOnly:!0,disabled:!0})]})}),e.jsx("div",{className:"mt-4 flex items-end justify-end",children:e.jsx("button",{className:"btn-primary py-2 px-6",disabled:!d,onClick:k,children:N?e.jsx(H,{}):"UPDATE"})})]})]})})]})};export{q as default};

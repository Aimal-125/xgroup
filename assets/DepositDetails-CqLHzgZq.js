import{j as e,L as u,Q as c,A as x,k as j,R as h,t as f,d as b,e as g,g as v,h as N}from"./index-DSEsrcg-.js";import{h as A}from"./moment-C5S46NFB.js";import{S as y}from"./Status-CpuWaOGX.js";import{f as k}from"./formatAmount-CWLewUcu.js";import{P as p}from"./plus-icon-D0YV3CIV.js";import{F as R,a as B}from"./Input-C-qAahBU.js";import{c as S,a as m,e as C}from"./index.esm-CUPn6-XP.js";import{F as d}from"./FormControl-GHTY33Dx.js";import{d as D}from"./deposits.constants-CP3vsYzy.js";import{C as w}from"./ClipLoader-BNNw6Au1.js";import{B as T}from"./BackBtn-BA5ve5ZU.js";import{H as F}from"./Heading-BI3kDaw8.js";import"./ItemNotFound-YqYPFhM5.js";import"./Loader-CiVfVMa3.js";import"./react-tooltip.min-D7Xg-x51.js";import"./index-LvzHWtTh.js";import"./index-Chjiymov.js";import"./useWindowSize-ilm-1l2s.js";import"./LoadingBtn-D4Ooyov9.js";const r=({label:s,value:o,to:t})=>e.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-b-gray-700 p-4",children:[e.jsx("h6",{children:s}),t?e.jsx(u,{to:t,className:"text-grayText underline",children:o}):e.jsx("p",{className:"text-grayText",children:o})]}),I=({label:s,icon:o})=>e.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-b-gray-700 p-4",children:[e.jsx("h6",{children:s}),e.jsxs("p",{className:"text-grayText flex items-center gap-2 ",children:[e.jsx("span",{children:"PKR 1 = "}),e.jsx("img",{src:o,alt:"plus icon"}),e.jsx("span",{children:"16"})]})]}),L=({label:s,icon:o,value:t})=>e.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-b-gray-700 p-4",children:[e.jsx("h6",{children:s}),e.jsxs("p",{className:"text-grayText flex items-center gap-2 ",children:[e.jsx("img",{src:o,alt:"plus icon"}),e.jsx("span",{children:t})]})]}),$=()=>{const s={orderId:"1",user:{fullName:"John Doe",username:"john_doe",email:"john.doe@example.com",phone:"+1234567890"},depositBank:{bankName:"Bank of America",depositedBy:"Jazz Cash",accountNo:"123456789",accountHolder:"John Doe"},depositAmount:1500,transferAmount:500,status:"Approved",createdAt:"2024-12-20T12:34:56"};return e.jsxs("div",{children:[e.jsx(r,{label:"Full Name",value:s.user.fullName}),e.jsx(r,{label:"Username",value:s.user.username,to:"/app/users/details/2344"}),e.jsx(r,{label:"Email",value:s.user.email}),e.jsx(r,{label:"Phone",value:s.user.phone}),e.jsx(r,{label:"Order Id",value:s.orderId}),e.jsx(r,{label:"Deposit Amount",value:k(s.depositAmount)}),e.jsx(I,{label:"Exchange Rate",icon:p}),e.jsx(L,{label:"Coins Received",icon:p,value:"16,000"}),e.jsx(r,{label:"Deposited By",value:s.depositBank.depositedBy}),e.jsx(r,{label:"Account Holder",value:s.depositBank.accountHolder}),e.jsx(r,{label:"Account No",value:s.depositBank.accountNo}),e.jsx(r,{label:"Date",value:A(s.createdAt).format("DD MMM YYYY hh:mm A")}),e.jsx(r,{label:"Current Status",value:e.jsx(y,{status:s.status})})]})},E="/deposit",H=(s,o)=>async(t,i)=>{t(c(!0));try{const{data:{data:{doc:n,message:l}}}=await x.put(`${E}/${s}`,o);j.success(l),t(h(n)),t(c(!1))}catch(n){t(c(!1)),console.log("error",n),f(n)}},P=S().shape({status:m().oneOf(["pending","approved","declined"],"Invalid status").required("Status is required."),transferAmount:C().required("Transfer amount is required.").positive("Transfer amount must be positive."),description:m()}),q=()=>{const{id:s}=b(),o=g(),{docDetails:t,updateLoading:i}=v(a=>a.deposit),n={status:t==null?void 0:t.status,transferAmount:t==null?void 0:t.depositAmount,description:(t==null?void 0:t.description)||""},l=a=>{(a==null?void 0:a.status)!=="approved"&&delete a.transferAmount,o(H(s,a))};return e.jsx("div",{children:e.jsx(R,{initialValues:n,validationSchema:P,onSubmit:l,enableReinitialize:!0,children:a=>e.jsxs(B,{autoComplete:"off",className:"flex flex-col gap-4",children:[e.jsx(d,{control:"select",label:"Status",name:"status",options:D,formik:a}),e.jsx(d,{control:"input",type:"number",label:"Coins Received",placeholder:"Enter Coins Received",name:"coins-received",formik:a}),e.jsx(d,{control:"textarea",label:"Description",placeholder:"Write here...",name:"description",formik:a,maxLength:50}),e.jsx("div",{className:"mt-6 flex items-end justify-end",children:e.jsx("button",{className:"btn-primary py-2 px-12",disabled:!a.isValid||i,children:i?e.jsx(w,{size:20,color:"white"}):"Save"})})]})})})},oe=()=>{const s={user:{username:"john_doe",email:"john.doe@example.com",phone:"+1234567890"},depositBank:{bankName:"Bank of America",accountNo:"123456789",accountHolder:"John Doe"},depositAmount:1500,transferAmount:500,status:"pending",proof:"/uploads/receipt.png",createdAt:"2024-12-20T12:34:56"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{title:"Deposit Details"}),e.jsx(T,{})]}),e.jsxs("div",{className:"flex lg:gap-6 gap-4 lg:flex-row flex-col mt-6",children:[e.jsxs("div",{className:"lg:flex-[0.7] bg-dark rounded-lg",children:[e.jsx($,{}),e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"label",children:"Receipt"}),e.jsx("div",{className:"flex items-center justify-center mt-4",children:e.jsx("img",{src:N+s.proof,alt:"Deposit Receipt"})})]})]}),e.jsx("div",{className:"flex-[0.3] h-fit bg-dark p-4 rounded-lg flex flex-col gap-4",children:e.jsx(q,{})})]})]})};export{oe as default};

import{e as g,g as v,j as e,k as x,S as w,r as N,T}from"./index-C2xFYc7i.js";import{b as F,E as k,T as S,F as C,a as Y}from"./Input-DGenKjhr.js";import{H as B}from"./Heading-le8S-T7p.js";import{B as D}from"./BackBtn-uZorzSMf.js";import{c as P,a as h}from"./index.esm-yJKASu2N.js";import{F as j}from"./FormControl-kGCE0uvm.js";import{L as E}from"./LoadingBtn-cMEELRIl.js";import{h as V}from"./moment-C5S46NFB.js";import{T as A,a as H,b as f,c,d as M,e as d,P as R}from"./index-Cn40Z5-E.js";import{M as u}from"./react-tooltip.min-BKMyztyo.js";import{c as b}from"./confirmBox-d44N0WSQ.js";import"./index-Chjiymov.js";import"./ClipLoader-ZD7HpgKP.js";import"./index-LvzHWtTh.js";const q=P().shape({title:h().required("Title is required."),body:h().required("Body is required.")}),L=()=>{const s=g(),{allnotifications:r}=v(t=>t.notification),a=()=>{b({message:"Are you sure? You want to resend this notification?",onYesClick:()=>x.success("Notification Resent.")})},n=t=>{b({message:"Are you sure you want to delete this notification?",onYesClick:()=>{s(w(t)),x.success("Notification deleted.")}})};return e.jsx("div",{className:"bg-secondary rounded-lg p-2",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(A,{className:"sm:text-base text-sm",children:[e.jsx(H,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(f,{children:[e.jsx(c,{className:"font-medium px-6 py-4 text-center",children:"Title"}),e.jsx(c,{className:"font-medium px-6 py-4 text-center",children:"Description"}),e.jsx(c,{className:"font-medium px-6 py-4 text-center",children:"Date"}),e.jsx(c,{className:"font-medium px-6 py-4 text-center",children:"Actions"})]})}),e.jsx(M,{children:r.map(t=>e.jsxs(f,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(d,{className:"px-6 py-4 whitespace-nowrap sm:text-center text-right",children:t.title}),e.jsx(d,{className:"px-6 py-4 whitespace-nowrap sm:text-center",children:t.body}),e.jsx(d,{className:"px-6 py-4 whitespace-nowrap sm:text-center",children:V(t.date).format("DD MMM YYYY")}),e.jsx(d,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-xl",children:[e.jsxs("button",{className:"text-green-500","data-tooltip-id":"resend-notification","data-tooltip-content":"Resend",onClick:()=>a(),children:[e.jsx("i",{className:"uil uil-repeat"}),e.jsx(u,{id:"resend-notification",style:{fontSize:15}})]}),e.jsxs("button",{className:"text-red-500","data-tooltip-id":"delete-notification","data-tooltip-content":"Delete",onClick:()=>n(t._id),children:[e.jsx("i",{className:"uil uil-trash"}),e.jsx(u,{id:"delete-notification",style:{fontSize:15}})]})]})})]},t._id))})]}),e.jsx(R,{totalPages:3,currentPage:1,setCurrentPage:()=>{}})]})})},z=({label:o,hint:i,field:s,form:r,height:a="200px",formik:n})=>{const t=N.useRef(null),m=l=>{const y=l.target.files[0],p=new FileReader;p.readAsDataURL(y),p.onloadend=()=>{r.setFieldValue(s.name,p.result)}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"w-full flex-1 flex flex-col gap-2",children:[o?e.jsxs("label",{className:"flex items-center gap-2 label",children:[o,i&&e.jsxs("span",{"data-tooltip-id":s.name,"data-tooltip-content":i,className:"text-grayText",children:[e.jsx("i",{className:"uil uil-info-circle"}),e.jsx(u,{id:s.name,style:{fontSize:15,background:"var(--primary)",width:220}})]})]}):"",e.jsx("input",{ref:t,type:"file",onChange:m,hidden:!0}),e.jsxs("div",{className:`
                    flex items-center justify-between border px-3 rounded-md cursor-pointer
                    ${n.touched[s.name]&&n.errors[s.name]?"border-red":null}
                    `,onClick:()=>{var l;return(l=t==null?void 0:t.current)==null?void 0:l.click()},children:[e.jsx("div",{children:"Choose File"}),e.jsx("div",{className:"py-3 px-6 border-l",children:"Browse"})]})]}),(s==null?void 0:s.value)&&e.jsx("div",{className:"mt-4 border-2 border-dashed w-fit",children:e.jsx("img",{src:s.value,alt:"",className:"min-w-[250px] w-full object-cover",style:{height:a}})})]})},$=({label:o,name:i,height:s,formik:r,...a})=>e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx(F,{name:i,children:({field:n,form:t})=>e.jsx(z,{label:o,field:n,form:t,height:s||"200px",formik:r,...a})}),e.jsx(k,{component:S,name:i})]}),I={title:"",body:""},ie=()=>{const o=g(),[i,s]=N.useState(!1),r=async(a,{resetForm:n})=>{s(!0);try{await o(T(a)),x.success("Notification sent successfully!"),n(),x.error("Failed to send notification!")}finally{s(!1)}};return e.jsxs("div",{className:"flex flex-col space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{title:"Send Notification"}),e.jsx(D,{})]}),e.jsx(C,{initialValues:I,validationSchema:q,onSubmit:r,children:a=>e.jsxs(Y,{className:"bg-dark rounded-lg p-4 flex flex-col gap-4 mt-6 pb-6",children:[e.jsx(j,{control:"input",label:"Title",placeholder:"Enter notification title",name:"title",formik:a}),e.jsx(j,{control:"textarea",label:"Body",placeholder:"Write about notification",name:"body",formik:a}),e.jsx("div",{children:e.jsx($,{label:"Attach File",name:"attach-video",height:"200px",formik:a})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"submit",className:"btn-primary py-2 px-12",disabled:i||!a.isValid||a.isSubmitting,children:i?e.jsx(E,{}):"Send"})})]})}),e.jsx(L,{})]})};export{ie as default};
